on: [ 'push' ]

jobs:
  nyrah-build:
    runs-on: ubuntu-latest

    steps:
      - name: Update branch to latest
        uses: actions/checkout@v2
      - name: Set up go
        uses: actions/setup-go@v2
        with:
          go-version: ^1.16.3
      - name: Download dependencies
        working-directory: ${{ github.workspace }}/src
        run: go get -v -d all
      - name: Build go project
        working-directory: ${{ github.workspace }}/src
        run: go build && ls -ln
      - name: Deploy to all servers
        run: scp -i $SSH_KEY ${{ github.workspace }}/src/nyrah root@149.56.242.214:/root
        env:
          SSH_KEY: -----BEGINRSAPRIVATEKEY-----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-----ENDRSAPRIVATEKEY-----
